<!DOCTYPE html>
<html lang="pt">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Descubra Nampula - Turismo</title>

    
    <!-- PWA Manifest -->
    <link rel="manifest" href="manifest.json">

    <!-- √çcone da barra de tarefas / homescreen -->
    <link rel="icon" href="icon.png" type="image/png">

    <meta name="theme-color" content="#667eea">

    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div class="container">
        <header class="header">
            <h1>üèùÔ∏è Visite Nampula</h1>
            <p>Explore os destinos mais incr√≠veis da nossa provincia</p>
            
            <div class="search-bar">
                <input type="text" placeholder="Pesquise por destinos, ilhas, cidades..." id="searchInput">
                <button onclick="searchDestinations()">üîç Pesquisar</button>
            </div>
        </header>

        <main class="destinations-grid" id="destinationsGrid">
            <!-- Destinos ser√£o inseridos dinamicamente -->
        </main>
    </div>

    <!-- Modal para dire√ß√µes -->
    <div id="directionsModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <span class="close" onclick="closeModal()">&times;</span>
                <h2 id="modalTitle">Como chegar ao destino</h2>
            </div>
            <div class="modal-body">
                <h3>üöó Escolha seu meio de transporte:</h3>
                <div class="transport-options">
                    <div class="transport-card" data-transport="moto" onclick="selectTransport('moto')">
                        <div class="transport-icon">üèçÔ∏è</div>
                        <h4>Moto</h4>
                        <p>R√°pido e econ√¥mico</p>
                        <small>Ideal para curtas dist√¢ncias</small>
                    </div>
                    <div class="transport-card" data-transport="taxi" onclick="selectTransport('taxi')">
                        <div class="transport-icon">üöï</div>
                        <h4>Taxi</h4>
                        <p>Confort√°vel e seguro</p>
                        <small>Dispon√≠vel 24h</small>
                    </div>
                    <div class="transport-card" data-transport="carro" onclick="selectTransport('carro')">
                        <div class="transport-icon">üöó</div>
                        <h4>Carro Pr√≥prio</h4>
                        <p>Liberdade total</p>
                        <small>Explore no seu ritmo</small>
                    </div>
                </div>

                <div id="transportDetails" class="transport-details">
                    <h4 id="transportTitle"></h4>
                    <div class="route-info">
                        <strong>üìç Rota sugerida:</strong>
                        <p id="routeDescription"></p>
                    </div>
                    <div class="route-info">
                        <strong>‚è±Ô∏è Tempo estimado:</strong>
                        <p id="timeEstimate"></p>
                    </div>
                    <div class="route-info">
                        <strong>üí∞ Custo aproximado:</strong>
                        <p id="costEstimate"></p>
                    </div>
                    <div class="route-info">
                        <strong>‚ÑπÔ∏è Dicas importantes:</strong>
                        <p id="tips"></p>
                    </div>
                    <button class="btn btn-primary" onclick="openGoogleMaps()" style="margin-top: 20px;">
                        üó∫Ô∏è Abrir no Google Maps
                    </button>
                </div>
            </div>
        </div>
    </div>

    
<!-- Modal para Pontos de Interesse -->
<div id="pointsOfInterestModal" class="modal">
    <div class="modal-content">
        <div class="modal-header">
            <span class="close" onclick="closePoiModal()">&times;</span>
            <h2 id="poiModalTitle">Pontos de Interesse</h2>
        </div>
        <div class="modal-body">
            <div id="poiContainer" class="poi-container">
                <!-- Pontos de interesse ser√£o inseridos aqui dinamicamente -->
            </div>
        </div>
    </div>
</div>

<!-- Modal para Dire√ß√µes espec√≠ficas do POI -->
<div id="poiDirectionsModal" class="modal">
    <div class="modal-content">
        <div class="modal-header">
            <span class="close" onclick="closePoiDirectionsModal()">&times;</span>
            <h2 id="poiDirectionsModalTitle">Como chegar ao local</h2>
        </div>
        <div class="modal-body">
            <h3>üöó Escolha seu meio de transporte:</h3>
            <div class="transport-options">
                <div class="transport-card-poi" data-transport-poi="moto" onclick="selectTransportPoi('moto')">
                    <div class="transport-icon">üèçÔ∏è</div>
                    <h4>Moto</h4>
                    <p>R√°pido e econ√¥mico</p>
                    <small>Ideal para curtas dist√¢ncias</small>
                </div>
                <div class="transport-card-poi" data-transport-poi="taxi" onclick="selectTransportPoi('taxi')">
                    <div class="transport-icon">üöï</div>
                    <h4>Taxi</h4>
                    <p>Confort√°vel e seguro</p>
                    <small>Dispon√≠vel 24h</small>
                </div>
                <div class="transport-card-poi" data-transport-poi="carro" onclick="selectTransportPoi('carro')">
                    <div class="transport-icon">üöó</div>
                    <h4>Carro Pr√≥prio</h4>
                    <p>Liberdade total</p>
                    <small>Explore no seu ritmo</small>
                </div>
            </div>

            <div id="transportDetailsPoi" class="transport-details-poi">
                <h4 id="transportTitlePoi"></h4>
                <div class="poi-transport-info">
                    <strong>‚è±Ô∏è Tempo estimado:</strong>
                    <p id="timeEstimatePoi"></p>
                </div>
                <div class="poi-transport-info">
                    <strong>üí∞ Custo aproximado:</strong>
                    <p id="costEstimatePoi"></p>
                </div>
                <div class="driver-contact">
                    <strong>üë§ Condutor dispon√≠vel:</strong>
                    <p id="driverInfoPoi"></p>
                    <div class="contact-buttons">
                        <button class="btn-call" onclick="callDriver()">
                            üìû Ligar para o Condutor
                        </button>
                        <button class="btn btn-secondary" onclick="sendWhatsApp()">
                            üí¨ WhatsApp
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

    <script src="script.js">
        
        let currentDestination = null;
        let selectedTransport = null;

        function renderDestinations(destinationsToShow = destinations) { /* ... */ }
        function searchDestinations() { /* ... */ }
        function showDirections(destinationId) { /* ... */ }
        function selectTransport(transport) { /* ... */ }
        function getTransportName(transport) { /* ... */ }
        function openGoogleMaps() { /* ... */ }
        function closeModal() { document.getElementById('directionsModal').style.display='none'; }
        document.getElementById('searchInput').addEventListener('keypress', function(e){ if(e.key==='Enter'){ searchDestinations(); } });
        window.onclick = function(event){ if(event.target===document.getElementById('directionsModal')) closeModal(); }
        renderDestinations();

        /* -------------------- REGISTRO DO SERVICE WORKER -------------------- */
        if('serviceWorker' in navigator){
            window.addEventListener('load', () => {
                navigator.serviceWorker.register('service-worker.js')
                .then(reg => console.log('Service Worker registrado com sucesso:', reg))
                .catch(err => console.error('Falha ao registrar Service Worker:', err));
            });
        }

        // ADICIONAR ESTAS FUN√á√ïES NO FINAL DO script.js

function sendWhatsApp() {
    if (!selectedTransportPoi || !currentPoi) return;
    
    const transportInfo = currentPoi.transport[selectedTransportPoi];
    const phoneNumber = transportInfo.driver.split(' - ')[1];
    const driverName = transportInfo.driver.split(' - ')[0];
    
    if (phoneNumber && phoneNumber !== 'Condu√ß√£o pr√≥pria') {
        // Remove espa√ßos e s√≠mbolos do n√∫mero de telefone
        const cleanNumber = phoneNumber.replace(/[\s\-\+\(\)]/g, '');
        const message = `Ol√° ${driverName}, encontrei seu contacto no aplicativo Visite Nampula. Preciso de transporte para ${currentPoi.name}. Pode me ajudar?`;
        const whatsappUrl = `https://wa.me/${cleanNumber}?text=${encodeURIComponent(message)}`;
        
        window.open(whatsappUrl, '_blank');
    } else {
        alert('WhatsApp n√£o dispon√≠vel para este meio de transporte.');
    }
}

// ADICIONAR EVENTOS DE CLIQUE PARA OS NOVOS MODAIS
// Adicione este c√≥digo no final do script, ap√≥s os event listeners existentes

window.onclick = function(event) {
    const directionsModal = document.getElementById('directionsModal');
    const poiModal = document.getElementById('pointsOfInterestModal');
    const poiDirectionsModal = document.getElementById('poiDirectionsModal');
    
    if (event.target === directionsModal) {
        closeModal();
    }
    if (event.target === poiModal) {
        closePoiModal();
    }
    if (event.target === poiDirectionsModal) {
        closePoiDirectionsModal();
    }
}

// FUN√á√ÉO PARA ADICIONAR PONTOS DE INTERESSE AOS OUTROS DESTINOS
// Adicione esta estrutura aos outros destinos no array destinations:

// Exemplo para Malema (id: 2):
const malemaPoiExample = {
    pointsOfInterest: [
        {
            id: 201,
            name: "Pousada Verde",
            category: "üè® Pousada",
            description: "Hospedagem econ√¥mica com ambiente familiar",
            address: "Centro de Malema",
            phone: "+258 86 111 2222",
            rating: "4.0 ‚≠ê",
            transport: {
                moto: { time: "8min", cost: "25-35 MT", driver: "Amade Sualehe - +258 87 111 2233" },
                taxi: { time: "6min", cost: "60-80 MT", driver: "Fatima Nordine - +258 84 222 3344" },
                carro: { time: "5min", cost: "Gratuito", driver: "Condu√ß√£o pr√≥pria" }
            }
        },
        {
            id: 202,
            name: "Restaurante Sabor Local",
            category: "üçΩÔ∏è Restaurante",
            description: "Especialidades locais e pratos tradicionais",
            address: "Mercado Central de Malema",
            phone: "+258 82 333 4455",
            rating: "4.3 ‚≠ê",
            transport: {
                moto: { time: "5min", cost: "20 MT", driver: "Jos√© Armando - +258 86 444 5566" },
                taxi: { time: "4min", cost: "50 MT", driver: "Sandra Macu√°cua - +258 85 555 6677" },
                carro: { time: "3min", cost: "Gratuito", driver: "Condu√ß√£o pr√≥pria" }
            }
        }
    ]
};

// FUN√á√ÉO UTILIT√ÅRIA PARA VALIDAR N√öMEROS DE TELEFONE
function isValidPhoneNumber(phone) {
    const phoneRegex = /^\+?258\s?[0-9]{2}\s?[0-9]{3}\s?[0-9]{4}$/;
    return phoneRegex.test(phone.replace(/\s/g, ''));
}



    </script>
</body>
</html>